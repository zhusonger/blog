---
title: 02:Android自定义控件-自由拖动控件MoveView
author: Zhusong
layout: post
footer: true
category: Android
date: 2020-2-22
excerpt: "02:Android自定义控件-自由拖动控件MoveView"
abstract: ""
---


# 功能需求
在当前页面内, 跟随手指移动, 先不管边界超出跟自动靠边  
内容可随意自定义, 由外部传入

# 思路
首先是当前页面内有效, 就简单一点, 使用自定义控件加上布局的方式实现, 就不通过WMS来实现了

跟随手指移动, 这里需要理解这个含义, 这里跟随的情况是 __不可交互的部分__ 跟随手指移动, 如果有按钮, 拖动条等这种需要交互的控件, 当手指在他们上面拖动时, 它不应该跟随你的手指去移动, 虽然可以控件中去区分后续动作是针对按钮的, 但是这样的灵敏度会有一定的差距, 体验感不是很好, 所以还是不去拦截可交互的内容. 当然, 不可点击的按钮还是作为可拖动的部分

根据上面的描述, 需要在触摸拦截上处理一下

跟随手指移动, 有2种方式去更新位置, 一种是直接设置x,y值(WMS实现拖动窗口方式), 另一种比较简单, 更新控件的margin值  
根据需求, 我们采用简单的实现



## 实现